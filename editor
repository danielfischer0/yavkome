<html>
	<head>
		<meta charset="utf-8">
		<style>
			#editor{
				cursor:pointer;
				margin:0;
			}
			input[type="color" i] {
				-webkit-appearance: square-button;
				width: 25px;
				height: 25px;
				background-color: buttonface;
				padding: 1px 2px;
			}

		</style>
		<script>
			window.onload = function() {
				var i = 1;
				var k = 1;
				var canvas = document.getElementById("editor");
				ctx = canvas.getContext("2d");
				var pressed = false;
				var mid = [];
				var bold = 10;
				var color = '#000000';
				var cap = 'round';
				//var maydraw = true;
				//var massinterval;
				ctx.lineCap = ctx.lineJoin = 'round';
				var pos = [];
				setStyle(bold, color, cap);
				function setStyle(width, color, cap){
					ctx.lineWidth = width;
					ctx.strokeStyle = color;
					ctx.lineCap = cap;
				}
				/*canvas.onmousewheel = function(e){
					bold = ctx.lineWidth += e.wheelDelta / 40;
					setStyle(bold, color, cap);
				}*/
				canvas.onmousedown = function(e){
					pressed = true;
					pos.push(
						{
							x:e.pageX+0.5,
							y:e.pageY+0.5
						}
					);
					ctx.beginPath();
					ctx.moveTo(pos[0].x,pos[0].y);
				}

				window.onmousemove = function(e){
					if(!pressed) return;
					/*
					if(maydraw){
						maydraw = false;
					}
					else{
						return;
					} */// заготовка если захочешь сделать задержку как у глюка (и у меня)
					pos.push({
						x:e.pageX+0.5,
						y:e.pageY+0.5
					});
					mid.push({
						x:(pos[k].x + pos[k-1].x)/2,
						y:(pos[k].y + pos[k-1].y)/2
					})
					ctx.quadraticCurveTo(pos[k-1].x,pos[k-1].y,mid[k-1].x,mid[k-1].y);
					ctx.stroke();
					ctx.beginPath();
					ctx.moveTo(mid[k-1].x,mid[k-1].y);
					k++;
				}

				window.onmouseup = function(e){
					pressed = false;
					pos = [];
					mid = [];
					i = 1;
					k = 1;
				}
				document.getElementById('color').onchange = function(e){
					color = document.getElementById('color').value;
					setStyle(bold, color, cap);
				}
				/*function setMass(mass){
					clearInterval(massinterval);
					massinterval = setInterval(function(){
						maydraw = true;
					},mass);
				}
				setMass(100);*/
			}
		</script>
	</head>
	<body>
		<canvas id="editor" width="800" height="400" style="background-color: lightGray;"></canvas><br/>
		<input type="color" id="color"></input>
		<!--Сам потом только сделай палитру, потому-что этот элемент не поддерживается многими современными браузерами
		тоже. Например - Safari. А это один из самых популярных браузеров у маководов.Кроссбраузерность первыше всего -->
	</body>
</html>
